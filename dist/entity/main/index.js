$(function(){"use strict";function t(t){"undefined"!=typeof wechat&&wechat.init({imgUrl:(location.origin+t.picture).replace(/.*http/g,"http"),title:t.title,description:t.content});var e=$(".panel"),n=e.find(".ads");n.find(".ads-close").on("click",function(t){n.addClass("out")});var o=e.find(".tip");setTimeout(function(){n.addClass("out"),o.addClass("out")},3e3),$('<link rel="stylesheet"/>').attr("href","/page/"+t.Theme.code+"/css/style.css").appendTo("head"),$.get("/page/"+t.Theme.code+"/index.html",function(n){$('<script id="card-template" type="text/html"/>').html(n).appendTo($("body")),e.append(template("entity-template",t));var a=0;i&&t.Posts.forEach(function(t,e){t.id==i&&(a=e+1)});var c=new Swiper(".swiper-container",{spaceBetween:10,preloadImages:!1,lazyLoading:!0,lazyLoadingInPrevNext:!0,lazyLoadingOnTransitionStart:!0,initialSlide:parseInt(window.location.hash.slice(1))||a,onClick:function(e,n){e.activeIndex>0&&(location.href="/post/"+t.Posts[e.activeIndex-1].id)},onSlideChangeStart:function(t){o.addClass("out")}});e.find(".footer-bar .logo").on("click",function(){c.slideTo(0)})})}var e=location.pathname.split("/").slice(1)[1],n=location.href.match(/\?.*pid=([^&]*)/),i=n&&n[1];$.getJSON("/services/entity/"+e,function(e){"success"==e.status?t(e.data):console.error(e.data)}),$(window).on("scroll",function(t){t.preventDefault()}).on("touchmove",function(t){t.preventDefault()}).on("mousemove","img",function(t){t.preventDefault()})});