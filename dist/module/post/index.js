angular.module("App",["commonServices"]).controller("AdminCtrl",["$scope","Alertify","Post",function(t,e,i){t.status=[{key:"pending",text:"待审核"},{key:"accept",text:"审核通过"},{key:"reject",text:"审核不通过"}],t.status_with_all=[{text:"全部"}].concat(t.status),t.search={limit:10},t.columns=[{field:"id",title:"ID",width:100},{field:"likeCount",title:"点赞数",width:100},{field:"status",title:"状态",width:150},{title:"发布人",width:120},{field:"createdAt",title:"创建日期",width:150},{title:"操作",width:60}],t.query=function(e){i.get(e).then(function(e){t.posts=e})},t.save=function(t){i.update(t).then(function(t){e.log("保存成功！")})},t.more=function(){t.search.limit+=10,i.get(t.search).then(function(i){i.length===t.posts.length?e.warn("没有更多了！"):t.posts=i})},t.query()}]);