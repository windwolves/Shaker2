function antireality(i){var e=$(".topic"),t=$('<div class="topics antireality" />').appendTo(e);i.forEach(function(i){{var e=$('<div class="topic_list" style="background:url('+i.thumbnail+') no-repeat 50%;background-size:100% 100%;" />').appendTo(t);$('<a class="topic_link" href="/entity/'+i.id+'"/>').appendTo(e)}})}function surreal(i){var e=$(".topic"),t=$('<div class="topics surreal" />').appendTo(e);i.forEach(function(i){{var e=$('<div class="topic_list" style="background:url('+i.thumbnail+') no-repeat 50%;background-size:100% 100%;" />').appendTo(t);$('<a class="topic_link" href="/entity/'+i.id+'"/>').appendTo(e)}})}function initWechat(i){i||(i={});var e=i.link||location.href.split("#")[0];$.post("/services/wechat-old/signature",{url:e},function(t){"success"==t.status?(wx.config({debug:!!location.search.slice(1).match(/debug=true/),appId:t.data.appId,nonceStr:t.data.nonceStr,timestamp:t.data.timestamp,signature:t.data.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo"]}),wx.ready(function(){wx.onMenuShareTimeline({title:i.title,link:e,imgUrl:i.imgUrl,fail:function(i){console.log(i)}}),wx.onMenuShareAppMessage({title:i.title,desc:i.description,link:e,imgUrl:i.imgUrl,success:function(i){console.log(i)},fail:function(i){console.log(i)}}),wx.onMenuShareQQ({title:i.title,desc:i.description,link:e,imgUrl:i.imgUrl,fail:function(i){console.log(i)}}),wx.onMenuShareWeibo({title:i.title,link:e,imgUrl:i.imgUrl,fail:function(i){console.log(i)}})}),wx.error(function(i){"invalid signature"==i&&$.get("/services/wechat-old/cleartoken")})):console.error(t.data)})}$(function(){initWechat({imgUrl:location.origin+"/module/recommen/img/icon.jpg",title:"稀客",description:"一个内容互动社区"}),$.getJSON("/services/entity/type/anti-realism",function(i){"success"==i.status?antireality(i.data):console.error(i.data)}),$.getJSON("/services/entity/type/surrealism",function(i){"success"==i.status?surreal(i.data):console.error(i.data)}),$(".topics_antireality").hasClass("topics_active")?($(".antireality").show(),$(".surreal").hide()):$(".topics_surreal").hasClass("topics_active")&&($(".surreal").show(),$(".antireality").hide()),$(".topics_antireality").click(function(){$(".topics_antireality").addClass("topics_active"),$(".topics_surreal").removeClass("topics_active"),$(".antireality").show(),$(".surreal").hide()}),$(".topics_surreal").click(function(){$(".topics_surreal").addClass("topics_active"),$(".topics_antireality").removeClass("topics_active"),$(".surreal").show(),$(".antireality").hide()})});